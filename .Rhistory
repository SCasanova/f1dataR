tidyr::unnest(cols = c(Driver, Time)) %>%
dplyr::select(driverId, position, points, grid:time) %>%
tibble::as_tibble()
season  = 2004
res <-  httr::GET(glue::glue('http://ergast.com/api/f1/{season}/{round}/results.json?limit=40', season = season, round = round))
data <- jsonlite::fromJSON(rawToChar(res$content))
data$MRData$RaceTable$Races$Results[[1]] %>%
tidyr::unnest(cols = c(Driver, Time, FastestLap)) %>%
dplyr::select(driverId, grid:AverageSpeed) %>%
tidyr::unnest(cols = c(Time, AverageSpeed),
names_repair = 'universal') %>%
suppressWarnings() %>%
suppressMessages() %>%
dplyr::select(
driverId:status,
gap = `time...6`,
fastest_rank =  rank,
laps,
fastest = `time...9`,
top_speed_kph = speed
) %>%
dplyr::mutate(time_sec = time_to_sec(fastest)) %>%
tibble::as_tibble()
ata$MRData$RaceTable$Races$Results[[1]] %>%
tidyr::unnest(cols = c(Driver, Time, FastestLap)) %>%
dplyr::select(driverId, grid:AverageSpeed) %>%
tidyr::unnest(cols = c(Time, AverageSpeed),
names_repair = 'universal') %>%
suppressWarnings() %>%
suppressMessages() %>%
dplyr::select(
driverId:status,
gap = `time...6`,
fastest_rank =  rank,
laps,
fastest = `time...9`,
top_speed_kph = speed
)
data$MRData$RaceTable$Races$Results[[1]] %>%
tidyr::unnest(cols = c(Driver, Time, FastestLap)) %>%
dplyr::select(driverId, grid:AverageSpeed) %>%
tidyr::unnest(cols = c(Time, AverageSpeed),
names_repair = 'universal') %>%
suppressWarnings() %>%
suppressMessages() %>%
dplyr::select(
driverId:status,
gap = `time...6`,
fastest_rank =  rank,
laps,
fastest = `time...9`,
top_speed_kph = speed
)
data$MRData$RaceTable$Races$Results[[1]] %>%
tidyr::unnest(cols = c(Driver, Time, FastestLap))
.load_results <- function(season = 'current', round = 'last'){
if(season != 'current' & (season < 1950 | season > 2022)){
stop('Year must be between 1950 and 2022 (or use "current")')
}
if(season < 2004){
res <-  httr::GET(glue::glue(
'http://ergast.com/api/f1/{season}/{round}/results.json?limit=40',
season = season,
round = round
))
data <- jsonlite::fromJSON(rawToChar(res$content))
data$MRData$RaceTable$Races$Results[[1]] %>%
tidyr::unnest(cols = c(Driver, Time)) %>%
dplyr::select(driverId, position, points, grid:time) %>%
tibble::as_tibble()
} else{
res <-  httr::GET(glue::glue('http://ergast.com/api/f1/{season}/{round}/results.json?limit=40', season = season, round = round))
data <- jsonlite::fromJSON(rawToChar(res$content))
data$MRData$RaceTable$Races$Results[[1]] %>%
tidyr::unnest(cols = c(Driver, Time, FastestLap)) %>%
dplyr::select(driverId, points,position, grid:AverageSpeed) %>%
tidyr::unnest(cols = c(Time, AverageSpeed),
names_repair = 'universal') %>%
suppressWarnings() %>%
suppressMessages() %>%
dplyr::select(
driverId:status,
gap = `time...6`,
fastest_rank =  rank,
laps,
fastest = `time...9`,
top_speed_kph = speed
) %>%
dplyr::mutate(time_sec = time_to_sec(fastest)) %>%
tibble::as_tibble()
}
}
load_results <- memoise::memoise(.load_results)
season = 2000
res <-  httr::GET(glue::glue('http://ergast.com/api/f1/{season}/{round}/qualifying.json?limit=40', season = season, round = round))
data <- jsonlite::fromJSON(rawToChar(res$content))
data$MRData$RaceTable$Races$QualifyingResults[[1]] %>%
tidyr::unnest(cols = c(Driver)) %>%
dplyr::select(driverId, position,Q1:Q3 ) %>%
suppressWarnings() %>%
suppressMessages() %>%
dplyr::mutate(Q1_sec = time_to_sec(Q1),
Q2_sec = time_to_sec(Q2),
Q3_sec = time_to_sec(Q3)) %>%
tibble::as_tibble()
data$MRData$RaceTable$Races$QualifyingResults[[1]]
data
data
data$MRData$RaceTable$Races
data$MRData$RaceTable
round = 1
res <-  httr::GET(glue::glue('http://ergast.com/api/f1/{season}/{round}/qualifying.json?limit=40', season = season, round = round))
data <- jsonlite::fromJSON(rawToChar(res$content))
data$MRData$RaceTable$Races
data$MRData$RaceTable$Races$QualifyingResults[[1]]
data$MRData$RaceTable$Races$QualifyingResults[[1]] %>%
tidyr::unnest(cols = c(Driver)) %>%
dplyr::select(driverId, position,Q1:Q3 ) %>%
suppressWarnings() %>%
suppressMessages() %>%
dplyr::mutate(Q1_sec = time_to_sec(Q1),
Q2_sec = time_to_sec(Q2),
Q3_sec = time_to_sec(Q3)) %>%
tibble::as_tibble()
data$MRData$RaceTable$Races$QualifyingResults[[1]] %>%
tidyr::unnest(cols = c(Driver)) %>%
dplyr::select(driverId, position,Q1:Q3 ) %>%
suppressWarnings() %>%
suppressMessages()
data$MRData$RaceTable$Races$QualifyingResults[[1]] %>%
tidyr::unnest(cols = c(Driver))
season
season <- 2004
res <-  httr::GET(glue::glue('http://ergast.com/api/f1/{season}/{round}/qualifying.json?limit=40', season = season, round = round))
data <- jsonlite::fromJSON(rawToChar(res$content))
data$MRData$RaceTable$Races$QualifyingResults[[1]] %>%
tidyr::unnest(cols = c(Driver)) %>%
dplyr::select(driverId, position,Q1:Q3 ) %>%
suppressWarnings() %>%
suppressMessages() %>%
dplyr::mutate(Q1_sec = time_to_sec(Q1),
Q2_sec = time_to_sec(Q2),
Q3_sec = time_to_sec(Q3)) %>%
tibble::as_tibble()
season <- 2005
data$MRData$RaceTable$Races$QualifyingResults[[1]] %>%
tidyr::unnest(cols = c(Driver)) %>%
dplyr::select(driverId, position,Q1:Q3 ) %>%
suppressWarnings() %>%
suppressMessages() %>%
dplyr::mutate(Q1_sec = time_to_sec(Q1),
Q2_sec = time_to_sec(Q2),
Q3_sec = time_to_sec(Q3)) %>%
tibble::as_tibble()
res <-  httr::GET(glue::glue('http://ergast.com/api/f1/{season}/{round}/qualifying.json?limit=40', season = season, round = round))
data <- jsonlite::fromJSON(rawToChar(res$content))
data$MRData$RaceTable$Races$QualifyingResults[[1]] %>%
tidyr::unnest(cols = c(Driver)) %>%
dplyr::select(driverId, position,Q1:Q3 ) %>%
suppressWarnings() %>%
suppressMessages() %>%
dplyr::mutate(Q1_sec = time_to_sec(Q1),
Q2_sec = time_to_sec(Q2),
Q3_sec = time_to_sec(Q3)) %>%
tibble::as_tibble()
season <- 2011
res <-  httr::GET(glue::glue('http://ergast.com/api/f1/{season}/{round}/qualifying.json?limit=40', season = season, round = round))
data <- jsonlite::fromJSON(rawToChar(res$content))
data$MRData$RaceTable$Races$QualifyingResults[[1]] %>%
tidyr::unnest(cols = c(Driver)) %>%
dplyr::select(driverId, position,Q1:Q3 ) %>%
suppressWarnings() %>%
suppressMessages() %>%
dplyr::mutate(Q1_sec = time_to_sec(Q1),
Q2_sec = time_to_sec(Q2),
Q3_sec = time_to_sec(Q3)) %>%
tibble::as_tibble()
season <- 2007
lue::glue('http://ergast.com/api/f1/{season}/{round}/qualifying.json?limit=40', season = season, round = round))
data <- jsonlite::fromJSON(rawToChar(res$content))
data$MRData$RaceTable$Races$QualifyingResults[[1]] %>%
tidyr::unnest(cols = c(Driver)) %>%
dplyr::select(driverId, position,Q1:Q3 ) %>%
suppressWarnings() %>%
suppressMessages() %>%
dplyr::mutate(Q1_sec = time_to_sec(Q1),
Q2_sec = time_to_sec(Q2),
Q3_sec = time_to_sec(Q3)) %>%
tibble::as_tibble()
res <-  httr::GET(glue::glue('http://ergast.com/api/f1/{season}/{round}/qualifying.json?limit=40', season = season, round = round))
data <- jsonlite::fromJSON(rawToChar(res$content))
data$MRData$RaceTable$Races$QualifyingResults[[1]] %>%
tidyr::unnest(cols = c(Driver)) %>%
dplyr::select(driverId, position,Q1:Q3 ) %>%
suppressWarnings() %>%
suppressMessages() %>%
dplyr::mutate(Q1_sec = time_to_sec(Q1),
Q2_sec = time_to_sec(Q2),
Q3_sec = time_to_sec(Q3)) %>%
tibble::as_tibble()
season <- 2006
res <-  httr::GET(glue::glue('http://ergast.com/api/f1/{season}/{round}/qualifying.json?limit=40', season = season, round = round))
data <- jsonlite::fromJSON(rawToChar(res$content))
data$MRData$RaceTable$Races$QualifyingResults[[1]] %>%
tidyr::unnest(cols = c(Driver)) %>%
dplyr::select(driverId, position,Q1:Q3 ) %>%
suppressWarnings() %>%
suppressMessages() %>%
dplyr::mutate(Q1_sec = time_to_sec(Q1),
Q2_sec = time_to_sec(Q2),
Q3_sec = time_to_sec(Q3)) %>%
tibble::as_tibble()
season <- 2005
res <-  httr::GET(glue::glue('http://ergast.com/api/f1/{season}/{round}/qualifying.json?limit=40', season = season, round = round))
data <- jsonlite::fromJSON(rawToChar(res$content))
data$MRData$RaceTable$Races$QualifyingResults[[1]] %>%
tidyr::unnest(cols = c(Driver)) %>%
dplyr::select(driverId, position,Q1:Q3 ) %>%
suppressWarnings() %>%
suppressMessages() %>%
dplyr::mutate(Q1_sec = time_to_sec(Q1),
Q2_sec = time_to_sec(Q2),
Q3_sec = time_to_sec(Q3)) %>%
tibble::as_tibble()
season <-1950
res <-  httr::GET(glue::glue('http://ergast.com/api/f1/{season}/{round}/qualifying.json?limit=40', season = season, round = round))
data <- jsonlite::fromJSON(rawToChar(res$content))
data$MRData$RaceTable$Races$QualifyingResults[[1]]
data$MRData$RaceTable$Races
round
data$MRData$RaceTable$Races$QualifyingResults[[1]] %>%
tidyr::unnest(cols = c(Driver)) %>%
dplyr::select(driverId, position,Q1:Q3 ) %>%
suppressWarnings() %>%
suppressMessages() %>%
dplyr::mutate(Q1_sec = time_to_sec(Q1),
Q2_sec = time_to_sec(Q2),
Q3_sec = time_to_sec(Q3)) %>%
tibble::as_tibble()
f1dataR::load_standings()
f1dataR::load_standings(2060)
f1dataR::load_standings(1950)
f1dataR::load_schedule()
f1dataR::load_schedule(1950)
f1dataR::load_schedule(1980)
f1dataR::load_schedule(2000)
f1dataR::load_schedule(2004)
f1dataR::load_schedule(2005)
season <- 2004
res <-
httr::GET(glue::glue('http://ergast.com/api/f1/{season}.json?limit=30', season = season))
data <- jsonlite::fromJSON(rawToChar(res$content))
data$MRData$RaceTable$Races
data$MRData$RaceTable$Races %>%
tidyr::unnest(cols = c(Circuit), names_repair = 'universal')
data$MRData$RaceTable$Races %>%
tidyr::unnest(cols = c(Circuit), names_repair = 'universal') %>%
janitor::clean_names() %>%
suppressWarnings() %>%
suppressMessages() %>%
tidyr::unnest(cols = c(location))
data$MRData$RaceTable$Races %>%
tidyr::unnest(cols = c(Circuit), names_repair = 'universal') %>%
janitor::clean_names() %>%
suppressWarnings() %>%
suppressMessages() %>%
tidyr::unnest(cols = c(location)) %>%
dplyr::select(season,
round,
race_name,
circuit_id,
circuit_name,
lat:country,
date) %>%
tibble::as_tibble()
season <- 1950
res <-
httr::GET(glue::glue('http://ergast.com/api/f1/{season}.json?limit=30', season = season))
data <- jsonlite::fromJSON(rawToChar(res$content))
data$MRData$RaceTable$Races %>%
tidyr::unnest(cols = c(Circuit), names_repair = 'universal') %>%
janitor::clean_names() %>%
suppressWarnings() %>%
suppressMessages() %>%
tidyr::unnest(cols = c(location)) %>%
dplyr::select(season,
round,
race_name,
circuit_id,
circuit_name,
lat:country,
date) %>%
tibble::as_tibble()
f1dataR::load_pitstops(2012)
devtools::document()
devtools::document()
devtools::document()
devtools::load_all()
library(f1dataR)
get_driver_telemetry(2022, 1, driver = 'LEC', fastest_only = T)
get_driver_telemetry(2022, 1, driver = 'LEC', fastest_only = T) %>%
head(300)
lec
lec <- get_driver_telemetry(2022, 1, driver = 'LEC', fastest_only = T) %>%
head(300)
lec
lec$Date
lec$Date %>% as.numeric()
lec
le
le
lec
ggplot(lec, aes(index, Speed))+
geom_line()+
theme_minimal()
devtools::document()
devtools::load_all()
pkgdown::build_articles()
pkgdown::build_articles()
pkgdown::build_articles()
f1dataR::load_results()
f1dataR::load_results(2021)
season == 2022
season = 2022
round = 'last'
season != 'current' & (season < 1950 | season > 2022
)
season < 2004
res <-  httr::GET(glue::glue('http://ergast.com/api/f1/{season}/{round}/results.json?limit=40', season = season, round = round))
data <- jsonlite::fromJSON(rawToChar(res$content))
data$MRData$RaceTable$Races$Results[[1]]
data$MRData$RaceTable$Races$Results[[1]] %>%
tidyr::unnest(cols = c(Driver, Time, FastestLap))
data$MRData$RaceTable$Races$Results[[1]] %>%
tidyr::unnest(cols = c(Driver, Time, FastestLap)) %>%
dplyr::select(driverId, points,position, grid:AverageSpeed)
res <-  httr::GET(glue::glue('http://ergast.com/api/f1/{season}/{round}/results.json?limit=40', season = season, round = round))
data <- jsonlite::fromJSON(rawToChar(res$content))
data$MRData$RaceTable$Races$Results[[1]] %>%
tidyr::unnest(cols = c(Driver, Time, FastestLap)) %>%
dplyr::select(driverId, points,position, grid:AverageSpeed) %>%
tidyr::unnest(cols = c(Time, AverageSpeed),
names_repair = 'universal') %>%
suppressWarnings() %>%
suppressMessages()
res <-  httr::GET(glue::glue('http://ergast.com/api/f1/{season}/{round}/results.json?limit=40', season = season, round = round))
data <- jsonlite::fromJSON(rawToChar(res$content))
data$MRData$RaceTable$Races$Results[[1]] %>%
tidyr::unnest(cols = c(Driver, Time, FastestLap)) %>%
dplyr::select(driverId, points,position, grid:AverageSpeed) %>%
tidyr::unnest(cols = c(Time, AverageSpeed),
names_repair = 'universal') %>%
suppressWarnings() %>%
suppressMessages() %>% view()
res <-  httr::GET(glue::glue('http://ergast.com/api/f1/{season}/{round}/results.json?limit=40', season = season, round = round))
data <- jsonlite::fromJSON(rawToChar(res$content))
data$MRData$RaceTable$Races$Results[[1]] %>%
tidyr::unnest(cols = c(Driver, Time, FastestLap)) %>%
dplyr::select(driverId, points,position, grid:AverageSpeed) %>%
tidyr::unnest(cols = c(Time, AverageSpeed),
names_repair = 'universal') %>%
suppressWarnings() %>%
suppressMessages() %>% View()
.load_results <- function(season = 'current', round = 'last'){
if(season != 'current' & (season < 1950 | season > 2022)){
stop('Year must be between 1950 and 2022 (or use "current")')
}
if(season < 2004){
res <-  httr::GET(glue::glue(
'http://ergast.com/api/f1/{season}/{round}/results.json?limit=40',
season = season,
round = round
))
data <- jsonlite::fromJSON(rawToChar(res$content))
data$MRData$RaceTable$Races$Results[[1]] %>%
tidyr::unnest(cols = c(Driver, Time)) %>%
dplyr::select(driverId, position, points, grid:time) %>%
tibble::as_tibble()
} else{
res <-  httr::GET(glue::glue('http://ergast.com/api/f1/{season}/{round}/results.json?limit=40', season = season, round = round))
data <- jsonlite::fromJSON(rawToChar(res$content))
data$MRData$RaceTable$Races$Results[[1]] %>%
tidyr::unnest(cols = c(Driver, Time, FastestLap)) %>%
dplyr::select(driverId, points,position, grid:AverageSpeed) %>%
tidyr::unnest(cols = c(Time, AverageSpeed),
names_repair = 'universal') %>%
suppressWarnings() %>%
suppressMessages() %>%
dplyr::select(
driverId:status,
gap = `time...8`,
fastest_rank =  rank,
laps,
fastest = `time...11`,
top_speed_kph = speed
) %>%
dplyr::mutate(time_sec = time_to_sec(fastest)) %>%
tibble::as_tibble()
}
}
load_results <- memoise::memoise(.load_results)
load_results(2003)
load_results(2021)
devtools::document()
devtools::document()
devtools::load_all()
if (!require("remotes")) install.packages("remotes")
remotes::install_github("SCasanova/f1dataR")
Sys.unsetenv('GITHUB_PAT')
if (!require("remotes")) install.packages("remotes")
remotes::install_github("SCasanova/f1dataR")
if (!require("remotes")) install.packages("remotes")
remotes::install_github("SCasanova/f1dataR")
if (!require("remotes")) install.packages("remotes")
remotes::install_github("SCasanova/f1dataR")
Sys.unsetenv('GITHUB_PAT')
if (!require("remotes")) install.packages("remotes")
remotes::install_github("SCasanova/f1dataR")
devtools::document()
devtools::load_all()
Sys.unsetenv('GITHUB_PAT')
if (!require("remotes")) install.packages("remotes")
remotes::install_github("SCasanova/f1dataR")
f1dataR::load_results()
driver_constructor_data <- readr::read_csv('data-raw/driverConstructorData.csv')
usethis::use_data(driver_constructor_data, overwrite = T)
devtools::document()
devtools::load_all()
driver_constructor_data
readr::read_csv('data-raw/driverConstructorData.csv')
driver_constructor_data <- readr::read_csv('data-raw/driverConstructorData.csv')
driver_constructor_data
usethis::use_data(driver_constructor_data, overwrite = T)
library(f1dataR)
load_standings()
load_standings()
load_standings(season = 2022)
load_standings(season = 2020)
usethis::use_test()
telem <- get_driver_telemetry(season = 2022, race = "Brazil", session = "S", driver = "HAM")
telem_fast <- get_driver_telemetry(season = 2022, race = "Brazil", session = "S", driver = "HAM")
load_race_session("session", 2022, "Brazil", "S")
f1dataR:::load_race_session("session", 2022, "Brazil", "S")
tel <- reticulate::py_run_string(glue::glue("tel =session.laps.pick_driver('{driver}').pick_fastest().get_telemetry().add_distance()",
driver = driver))
tel <- reticulate::py_run_string(glue::glue("tel =session.laps.pick_driver('{driver}').pick_fastest().get_telemetry().add_distance()",
driver = "HAM"))
type(tel)
class(tel)
t2<-reticulate::py_to_r(tel)
t2
class(t2)
tibble::as_tibble(t2)
tibble::as_tibble(t2$tel)
library(f1dataR)
get_driver_telemetry(driver="HAM")
library(f1dataR)
get_driver_telemetry(driver="HAM")
get_driver_telemetry(driver="HAM")
py_tel_object
object <- py_tel_object$tel %>%
tibble::as_tibble()
object
library(f1dataR)
get_driver_telemetry(driver="HAM")
rm(tel, t2)
telem <- get_driver_telemetry(season = 2022, race = "Brazil", session = "S", driver = "HAM")
telem_fast <- get_driver_telemetry(season = 2022, race = "Brazil", session = "S", driver = "HAM")
telem <- get_driver_telemetry(season = 2022, race = "Brazil", session = "S", driver = "HAM")
telem_fast <- get_driver_telemetry(season = 2022, race = "Brazil", session = "S", driver = "HAM", fastest_only = T)
telem_fast %in% telem
any(telem_fast %in% telem)
?merge
merge(telem_fast, telem)
merge(telem, telem_fast)
telem_fast$Time %in% telem$Time
all(telem_fast$Time %in% telem$Time)
library(testthat)
standings_2021<-.load_standings(2021)
standings_2021<-f1dataR:::.load_standings(2021)
url
f1dataR::clear_f1_cache()
f1dataR::clear_f1_cache()
?.onLoad
library(f1dataR)
reticulate::configure_environment
reticulate::configure_environment()
reticulate::configure_environment
reticulate::python_package_requirements
reticulate:::python_package_requirements
?package
reticulate:::python_package_requirements_find
reticulate::py_available()
reticulate::py_version()
reticulate::py_versions_windows()
reticulate::py_available()
reticulate::py_module_available('fastf1')
load_standings(2019)
load_standings(2019)
url
devtools::test_coverage()
f1dataR::load_results(2003, 1)
usethis::use_test()
load_race_session("session", 2022, 1, "Q")
f1dataR::load_race_session("session", 2022, 1, "Q")
f1dataR:::load_race_session("session", 2022, 1, "Q")
f1dataR:::load_race_session("session", season = 2022, race = 1, session = "Q")
f1dataR:::load_race_session("session", season = 2022, race = 1, session = "R")
f1dataR:::load_race_session("session")
library(f1dataR)
f1dataR:::load_race_session("session")
get_driver_telemetry()
